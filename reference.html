<!DOCTYPE html>
<html>
  <head>
    <title>Neon Programming Language Reference</title>
    <meta charset="utf-8"> 
    <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
  </head>
  <body>
    <div id="page">
      <div class="title">
        <a href="/">
          Neon
        </a>
      </div>
      <div class="links">
        <p>
          <a href="/">home</a> |
          <a href="/docs.html">documentation</a> |
          <a href="/download.html">download</a> |
          <a href="https://github.com/ghewgill/neon-lang">source</a>
        </p>
      </div>
      <h1 id="neon-programming-language-reference">Neon Programming Language Reference</h1>

<p>This document is intended as detailed reference material.
It is not intended as an introduction to the language.</p>

<ol>
  <li><a href="#lexical">Lexical Structure</a>
    <ol>
      <li><a href="lexical-comments">Comments</a></li>
      <li><a href="lexical-keywords">Keywords</a></li>
      <li><a href="lexical-identifiers">Identifiers</a></li>
      <li><a href="lexical-numbers">Numbers</a></li>
      <li><a href="lexical-strings">Strings</a></li>
    </ol></li>
  <li><a href="#types">Types</a>
    <ol>
      <li><a href="#types-boolean">Boolean</a></li>
      <li><a href="#types-number">Number</a></li>
      <li><a href="#types-string">String</a></li>
      <li><a href="#types-bytes">Bytes</a></li>
      <li><a href="#types-enumeration">Enumeration</a></li>
      <li><a href="#types-record">Record</a></li>
      <li><a href="#types-array">Array</a></li>
      <li><a href="#types-dictionary">Dictionary</a></li>
      <li><a href="#types-pointer">Pointer</a></li>
    </ol></li>
  <li><a href="#expressions">Expressions</a>
    <ol>
      <li><a href="#expressions-literal">Literal Values</a></li>
      <li><a href="#expressions-boolean">Boolean Operators</a></li>
      <li><a href="#expressions-numeric">Numeric Operators</a></li>
      <li><a href="#expressions-string">String Operators</a></li>
      <li><a href="#expressions-array">Array Operator</a></li>
      <li><a href="#expressions-dictionary">Dictionary Operator</a></li>
      <li><a href="#expressions-pointer">Pointer Operator</a></li>
      <li><a href="#expressions-precedence">Operator Precedence</a></li>
      <li><a href="#expressions-subscript">Array Subscripts</a></li>
      <li><a href="#expressions-substitution">Expression Substitution</a></li>
    </ol></li>
  <li><a href="#statements">Statements</a>
    <ol>
      <li><a href="#statements-assignment">Assignment</a></li>
      <li><a href="#statements-function-call">Function Call</a></li>
      <li><a href="#statements-case">CASE</a></li>
      <li><a href="#statements-exit">EXIT</a></li>
      <li><a href="#statements-for">FOR</a></li>
      <li><a href="#statements-if">IF</a></li>
      <li><a href="#statements-let">LET</a></li>
      <li><a href="#statements-loop">LOOP</a></li>
      <li><a href="#statements-next">NEXT</a></li>
      <li><a href="#statements-raise">RAISE</a></li>
      <li><a href="#statements-repeat">REPEAT</a></li>
      <li><a href="#statements-return">RETURN</a></li>
      <li><a href="#statements-try">TRY</a></li>
      <li><a href="#statements-while">WHILE</a></li>
    </ol></li>
  <li><a href="#functions">Functions</a>
    <ol>
      <li><a href="#functions-parameter-mode">Parameter Modes</a></li>
      <li><a href="#functions-default">Default Parameter Value</a></li>
      <li><a href="#functions-named">Named Parameters</a></li>
      <li>Foreign Functions</li>
    </ol></li>
  <li><a href="#modules">Modules</a>
    <ol>
      <li><a href="#modules-export">Export</a></li>
      <li><a href="#modules-import">Import</a></li>
      <li><a href="#modules-neonpath">Module Path</a></li>
    </ol></li>
  <li><a href="#library">Standard Library</a>
    <ol>
      <li><a href="#library-bigint">bigint</a></li>
      <li><a href="#library-binary">binary</a></li>
      <li><a href="#library-cformat">cformat</a></li>
      <li><a href="#library-complex">complex</a></li>
      <li><a href="#library-compress">compress</a></li>
      <li><a href="#library-curses">curses</a></li>
      <li><a href="#library-datetime">datetime</a></li>
      <li><a href="#library-file">file</a></li>
      <li><a href="#library-hash">hash</a></li>
      <li><a href="#library-http">http</a></li>
      <li><a href="#library-io">io</a></li>
      <li><a href="#library-json">json</a></li>
      <li><a href="#library-math">math</a></li>
      <li><a href="#library-net">net</a></li>
      <li><a href="#library-os">os</a></li>
      <li><a href="#library-random">random</a></li>
      <li><a href="#library-regex">regex</a></li>
      <li><a href="#library-sqlite">sqlite</a></li>
      <li><a href="#library-string">string</a></li>
      <li><a href="#library-struct">struct</a></li>
      <li><a href="#library-sys">sys</a></li>
      <li><a href="#library-time">time</a></li>
      <li><a href="#library-variant">variant</a></li>
      <li><a href="#library-xml">xml</a></li>
    </ol></li>
  <li><a href="#grammar">Grammar</a></li>
</ol>

<p><a name="lexical"></a></p>

<h2 id="lexical-structure">Lexical Structure</h2>

<p>Neon source code is encoded in UTF-8.
All keywords and identifiers are case sensitive.</p>

<p><a name="lexical-comments"></a></p>

<h3 id="comments">Comments</h3>

<p>The comment lead-in character is <code class="highlighter-rouge">%</code>.
A single line comment is a <code class="highlighter-rouge">%</code> followed by arbitrary text to the end of the line.
A block comment is introduced with <code class="highlighter-rouge">%|</code> and ends with <code class="highlighter-rouge">|%</code>.
Block comments may span multiple lines.
Block comments may be nested.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>% The following line prints some text.
print("Hello, World.")

%| This comment spans multiple
   lines of text until the comment
   closing characters. |%
</code></pre>
</div>

<p><a name="lexical-keywords"></a></p>

<h3 id="keywords">Keywords</h3>

<p>All words that consist of only uppercase letters are reserved for keywords.
The following keywords are defined by the language.</p>

<table>
  <thead>
    <tr>
      <th>Keyword</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#keyword-ALIAS"><code class="highlighter-rouge">ALIAS</code></a></td>
      <td>used in <code class="highlighter-rouge">IMPORT</code> to optionally rename a module</td>
    </tr>
    <tr>
      <td><a href="#keyword-AND"><code class="highlighter-rouge">AND</code></a></td>
      <td>logical conjunction</td>
    </tr>
    <tr>
      <td><a href="#keyword-AS"><code class="highlighter-rouge">AS</code></a></td>
      <td>names a tested expression in <code class="highlighter-rouge">IF VALID</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-ASSERT"><code class="highlighter-rouge">ASSERT</code></a></td>
      <td>assert that an expression is true, used for diagnostics</td>
    </tr>
    <tr>
      <td><a href="#keyword-Array"><code class="highlighter-rouge">Array</code></a></td>
      <td>generic array type</td>
    </tr>
    <tr>
      <td><a href="#keyword-BEGIN"><code class="highlighter-rouge">BEGIN</code></a></td>
      <td>used in <code class="highlighter-rouge">BEGIN MAIN</code> to indicate a program entry point</td>
    </tr>
    <tr>
      <td><a href="#keyword-CASE"><code class="highlighter-rouge">CASE</code></a></td>
      <td>multiple value matching from a range</td>
    </tr>
    <tr>
      <td><a href="#keyword-CONSTANT"><code class="highlighter-rouge">CONSTANT</code></a></td>
      <td>constant declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-DECLARE"><code class="highlighter-rouge">DECLARE</code></a></td>
      <td>exception and forward function declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-DEFAULT"><code class="highlighter-rouge">DEFAULT</code></a></td>
      <td>default value for function parameter</td>
    </tr>
    <tr>
      <td><a href="#keyword-DEC"><code class="highlighter-rouge">DEC</code></a></td>
      <td>decrement a <code class="highlighter-rouge">Number</code> variable</td>
    </tr>
    <tr>
      <td><a href="#keyword-Dictionary"><code class="highlighter-rouge">Dictionary</code></a></td>
      <td>generic dictionary type</td>
    </tr>
    <tr>
      <td><a href="#keyword-DO"><code class="highlighter-rouge">DO</code></a></td>
      <td>used in <code class="highlighter-rouge">CASE</code>, <code class="highlighter-rouge">FOR</code>, and <code class="highlighter-rouge">WHILE</code> statements</td>
    </tr>
    <tr>
      <td><a href="#keyword-ELSE"><code class="highlighter-rouge">ELSE</code></a></td>
      <td>alternative condition in <code class="highlighter-rouge">IF</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-ELSIF"><code class="highlighter-rouge">ELSIF</code></a></td>
      <td>alternative and test in <code class="highlighter-rouge">IF</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-EMBED"><code class="highlighter-rouge">EMBED</code></a></td>
      <td>include an external file directly into the compiled code</td>
    </tr>
    <tr>
      <td><a href="#keyword-ENUM"><code class="highlighter-rouge">ENUM</code></a></td>
      <td>enumeration type declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-END"><code class="highlighter-rouge">END</code></a></td>
      <td>end of most kinds of blocks of code</td>
    </tr>
    <tr>
      <td><a href="#keyword-EXCEPTION"><code class="highlighter-rouge">EXCEPTION</code></a></td>
      <td>exception declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-EXIT"><code class="highlighter-rouge">EXIT</code></a></td>
      <td>early exit from loops</td>
    </tr>
    <tr>
      <td><a href="#keyword-EXPORT"><code class="highlighter-rouge">EXPORT</code></a></td>
      <td>export identifier from module</td>
    </tr>
    <tr>
      <td><a href="#keyword-FOREIGN"><code class="highlighter-rouge">FOREIGN</code></a></td>
      <td>foreign function declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-FALSE"><code class="highlighter-rouge">FALSE</code></a></td>
      <td>boolean constant</td>
    </tr>
    <tr>
      <td><a href="#keyword-FIRST"><code class="highlighter-rouge">FIRST</code></a></td>
      <td>indicates first value in array subscript</td>
    </tr>
    <tr>
      <td><a href="#keyword-FOR"><code class="highlighter-rouge">FOR</code></a></td>
      <td>loop with a sequential control variable</td>
    </tr>
    <tr>
      <td><a href="#keyword-FOREACH"><code class="highlighter-rouge">FOREACH</code></a></td>
      <td>loop over an array of values</td>
    </tr>
    <tr>
      <td><a href="#keyword-FUNCTION"><code class="highlighter-rouge">FUNCTION</code></a></td>
      <td>definition of subprogram</td>
    </tr>
    <tr>
      <td><a href="#keyword-HEXBYTES"><code class="highlighter-rouge">HEXBYTES</code></a></td>
      <td>literal <code class="highlighter-rouge">Bytes</code> value</td>
    </tr>
    <tr>
      <td><a href="#keyword-IF"><code class="highlighter-rouge">IF</code></a></td>
      <td>conditional test and branch</td>
    </tr>
    <tr>
      <td><a href="#keyword-IN"><code class="highlighter-rouge">IN</code></a></td>
      <td>function parameter passing mode; aggregate membership test</td>
    </tr>
    <tr>
      <td><a href="#keyword-INC"><code class="highlighter-rouge">INC</code></a></td>
      <td>increment a <code class="highlighter-rouge">Number</code> variable</td>
    </tr>
    <tr>
      <td><a href="#keyword-INDEX"><code class="highlighter-rouge">INDEX</code></a></td>
      <td>used in <code class="highlighter-rouge">FOREACH</code> statement for counting values</td>
    </tr>
    <tr>
      <td><a href="#keyword-INOUT"><code class="highlighter-rouge">INOUT</code></a></td>
      <td>function parameter passing mode</td>
    </tr>
    <tr>
      <td><a href="#keyword-IMPORT"><code class="highlighter-rouge">IMPORT</code></a></td>
      <td>access code in another module</td>
    </tr>
    <tr>
      <td><a href="#keyword-IS"><code class="highlighter-rouge">IS</code></a></td>
      <td>used in a <code class="highlighter-rouge">TYPE</code> declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-LAST"><code class="highlighter-rouge">LAST</code></a></td>
      <td>indicates last value in array subscript</td>
    </tr>
    <tr>
      <td><a href="#keyword-LET"><code class="highlighter-rouge">LET</code></a></td>
      <td>assignment to read-only value</td>
    </tr>
    <tr>
      <td><a href="#keyword-LOOP"><code class="highlighter-rouge">LOOP</code></a></td>
      <td>generic loop</td>
    </tr>
    <tr>
      <td><a href="#keyword-MAIN"><code class="highlighter-rouge">MAIN</code></a></td>
      <td>used in <code class="highlighter-rouge">BEGIN MAIN</code> to indicate a program entry point</td>
    </tr>
    <tr>
      <td><a href="#keyword-MOD"><code class="highlighter-rouge">MOD</code></a></td>
      <td>arithmetic modulus</td>
    </tr>
    <tr>
      <td><a href="#keyword-NATIVE"><code class="highlighter-rouge">NATIVE</code></a></td>
      <td>declares a predefined function in the standard library</td>
    </tr>
    <tr>
      <td><a href="#keyword-NEXT"><code class="highlighter-rouge">NEXT</code></a></td>
      <td>early skip to next loop iteration</td>
    </tr>
    <tr>
      <td><a href="#keyword-NEW"><code class="highlighter-rouge">NEW</code></a></td>
      <td>dynamic memory allocation</td>
    </tr>
    <tr>
      <td><a href="#keyword-NIL"><code class="highlighter-rouge">NIL</code></a></td>
      <td>pointer value constant</td>
    </tr>
    <tr>
      <td><a href="#keyword-NOT"><code class="highlighter-rouge">NOT</code></a></td>
      <td>logical negation</td>
    </tr>
    <tr>
      <td><a href="#keyword-OF"><code class="highlighter-rouge">OF</code></a></td>
      <td>used in <code class="highlighter-rouge">FOREACH</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-OR"><code class="highlighter-rouge">OR</code></a></td>
      <td>logical disjunction</td>
    </tr>
    <tr>
      <td><a href="#keyword-OUT"><code class="highlighter-rouge">OUT</code></a></td>
      <td>function parameter passing mode</td>
    </tr>
    <tr>
      <td><a href="#keyword-OTHERS"><code class="highlighter-rouge">OTHERS</code></a></td>
      <td>alternative condition in a <code class="highlighter-rouge">CASE</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-POINTER"><code class="highlighter-rouge">POINTER</code></a></td>
      <td>pointer type declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-PRIVATE"><code class="highlighter-rouge">PRIVATE</code></a></td>
      <td>private record field</td>
    </tr>
    <tr>
      <td><a href="#keyword-RAISE"><code class="highlighter-rouge">RAISE</code></a></td>
      <td>initiate exception search</td>
    </tr>
    <tr>
      <td><a href="#keyword-RECORD"><code class="highlighter-rouge">RECORD</code></a></td>
      <td>named aggregate type declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-REPEAT"><code class="highlighter-rouge">REPEAT</code></a></td>
      <td>bottom-tested loop</td>
    </tr>
    <tr>
      <td><a href="#keyword-RETURN"><code class="highlighter-rouge">RETURN</code></a></td>
      <td>early exit and value return from function</td>
    </tr>
    <tr>
      <td><a href="#keyword-STEP"><code class="highlighter-rouge">STEP</code></a></td>
      <td>used in <code class="highlighter-rouge">FOR</code> loop for increment value</td>
    </tr>
    <tr>
      <td><a href="#keyword-THEN"><code class="highlighter-rouge">THEN</code></a></td>
      <td>used in <code class="highlighter-rouge">IF</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-TO"><code class="highlighter-rouge">TO</code></a></td>
      <td>used in <code class="highlighter-rouge">FOR</code> loop; part of pointer declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-TRUE"><code class="highlighter-rouge">TRUE</code></a></td>
      <td>boolean constant</td>
    </tr>
    <tr>
      <td><a href="#keyword-TRY"><code class="highlighter-rouge">TRY</code></a></td>
      <td>start of exception-checked block</td>
    </tr>
    <tr>
      <td><a href="#keyword-TYPE"><code class="highlighter-rouge">TYPE</code></a></td>
      <td>define named type</td>
    </tr>
    <tr>
      <td><a href="#keyword-UTIL"><code class="highlighter-rouge">UNTIL</code></a></td>
      <td>used at end of <code class="highlighter-rouge">REPEAT</code> loop</td>
    </tr>
    <tr>
      <td><a href="#keyword-VAR"><code class="highlighter-rouge">VAR</code></a></td>
      <td>variable declaration</td>
    </tr>
    <tr>
      <td><a href="#keyword-VALID"><code class="highlighter-rouge">VALID</code></a></td>
      <td>used in <code class="highlighter-rouge">IF VALID</code> pointer test statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-WHEN"><code class="highlighter-rouge">WHEN</code></a></td>
      <td>used in <code class="highlighter-rouge">CASE</code> statement</td>
    </tr>
    <tr>
      <td><a href="#keyword-WHILE"><code class="highlighter-rouge">WHILE</code></a></td>
      <td>top-tested loop</td>
    </tr>
    <tr>
      <td><a href="#keyword-WITH"><code class="highlighter-rouge">WITH</code></a></td>
      <td>parameter specification for named parameters</td>
    </tr>
  </tbody>
</table>

<p><a name="lexical-identifiers"></a></p>

<h3 id="identifiers">Identifiers</h3>

<p>An identifier is a letter followed by any number of letters, digits, or underscore.
Identifiers which consist of all uppercase letters are reserved for <a href="#lexical-keywords">keywords</a>.</p>

<p><a name="lexical-numbers"></a></p>

<h3 id="numbers">Numbers</h3>

<p>Literal numbers are in base 10 by default.</p>

<p>Numbers may be specified in a variety of bases:</p>

<ul>
  <li>Binary preceded by <code class="highlighter-rouge">0b</code></li>
  <li>Octal preceded by <code class="highlighter-rouge">0o</code></li>
  <li>Hexadecimal preceded by <code class="highlighter-rouge">0x</code></li>
  <li>Any base from 2 to 36 preceded by <code class="highlighter-rouge">0#n#</code> where <code class="highlighter-rouge">n</code> is the base</li>
</ul>

<p>For base 10 numbers, they may contain a fractional portion following a decimal point <code class="highlighter-rouge">.</code>.
Additionally, they may have an exponent following <code class="highlighter-rouge">e</code> or <code class="highlighter-rouge">E</code>.</p>

<p><a name="lexical-strings"></a></p>

<h3 id="strings">Strings</h3>

<p>Strings are sequences of Unicode characters surrounded by double quotes.
The only special character within a string is the backslash, used for character escapes.
The allowed character escapes are:</p>

<table>
  <thead>
    <tr>
      <th>Escape</th>
      <th>Replacement</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">\"</code></td>
      <td>”</td>
      <td>double quote</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\\</code></td>
      <td>\</td>
      <td>backslash</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\b</code></td>
      <td>chr(8)</td>
      <td>backspace</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\f</code></td>
      <td>chr(11)</td>
      <td>form feed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\n</code></td>
      <td>chr(10)</td>
      <td>newline</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\r</code></td>
      <td>chr(13)</td>
      <td>carriage return</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\t</code></td>
      <td>chr(9)</td>
      <td>tab</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\uXXXX</code></td>
      <td>chr(XXXX)</td>
      <td>Unicode character XXXX (where XXXX is a 4-digit hex number)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">\()</code></td>
      <td>expression</td>
      <td>see <a href="#expressions-substitution">expression substitution</a></td>
    </tr>
  </tbody>
</table>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR s: String

s := "Hello, World"
</code></pre>
</div>

<p>Literal strings may need to contain backslashes (such as when used for regular expressions).
Instead of using normal double-quoted strings, there are two varieties of “raw strings”.
The first can contain any character except <code class="highlighter-rouge">"</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CONSTANT s: String := @"This string contains backslash (\) characters"
</code></pre>
</div>

<p>The second type of string uses arbitrary delimiters so that any literal string can be included in source.
The simplest form is:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CONSTANT s: String := @@"This string contains backslashes (\) and "quotes"."@@
</code></pre>
</div>

<p>If there is a need to include the sequence <code class="highlighter-rouge">"@@</code> within the string, an arbitrary identifier may appear between the <code class="highlighter-rouge">@</code> at the start and end of the stiring.
For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CONSTANT s: String := @raw@"A raw string example is @@"like this"@@."@raw@
</code></pre>
</div>

<p><a name="types"></a></p>

<h2 id="types">Types</h2>

<p>Neon is statically and strongly typed.
Every value has a definite type, and there are no automatic conversions between types.</p>

<p><a name="types-boolean"></a></p>

<h3 id="boolean">Boolean</h3>

<p>Boolean values can take on two values, <code class="highlighter-rouge">FALSE</code> or <code class="highlighter-rouge">TRUE</code>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET b: Boolean := TRUE
</code></pre>
</div>

<p><a name="types-number"></a></p>

<h3 id="number">Number</h3>

<p>Number values are 128-bit decimal floating point (specifically, <a href="https://en.wikipedia.org/wiki/Decimal128_floating-point_format">decimal128</a>).
The valid magnitude range of numbers are (in addition to zero):</p>

<ul>
  <li>Minimum: 1.000000000000000000000000000000000e-6143</li>
  <li>Maximum: 9.999999999999999999999999999999999e6144</li>
</ul>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET n: Number := 2.997924580e+8
</code></pre>
</div>

<p><a name="types-string"></a></p>

<h3 id="string">String</h3>

<p>String values are sequences of Unicode code points.</p>

<p>&lt;a name=”types-bytes”&lt;/a&gt;</p>

<h3 id="bytes">Bytes</h3>

<p>Bytes values are sequences of 8-bit bytes.
Values of this type are used for buffers when doing file and network I/O, for example.</p>

<p><a name="types-enumeration"></a></p>

<h3 id="enumeration">Enumeration</h3>

<p>Enumeration values are one of a set of valid values defined in the <code class="highlighter-rouge">ENUM</code> definition.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Colour IS ENUM
    red
    green
    blue
END ENUM

LET e: Colour := Colour.green
</code></pre>
</div>

<p><a name="types-record"></a></p>

<h3 id="record">Record</h3>

<p>Records are aggregate types that contain named elements with independent types.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Item IS RECORD
    name: String
    size: Number
END RECORD

VAR r: Item := Item()

r.name := "Widget"
r.size := 5
</code></pre>
</div>

<p>Records may have associated functions called methods, which can be called using a typical method call syntax.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Cart IS RECORD
    apples: Number
    oranges: Number
END RECORD

FUNCTION Cart.totalFruit(self: Cart): Number
    RETURN self.apples + self.oranges
END FUNCTION

VAR c: Cart := Cart()
c.apples := 5
c.oranges := 6
print(str(c.totalFruit()))
</code></pre>
</div>

<p>Record fields may be marked <code class="highlighter-rouge">PRIVATE</code>, which means that only code within associated methods may access that field.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Cart IS RECORD
    apples: Number
    oranges: Number
    PRIVATE nuts: Number
END RECORD
</code></pre>
</div>

<p><a name="types-array"></a></p>

<h3 id="array">Array</h3>

<p>Arrays are variable size sequences of values indexed by nonnegative integers.
Arrays are dynamically sized as needed.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR a: Array&lt;String&gt; := []

a[0] := "Hello"
a[1] := "World"
</code></pre>
</div>

<p><a name="types-dictionary"></a></p>

<h3 id="dictionary">Dictionary</h3>

<p>Dictionaries are an associative map which pairs a unique <code class="highlighter-rouge">String</code> with a value of some type.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR d: Dictionary&lt;Number&gt; := {}

d["gold"] := 1
d["silver"] := 2
d["bronze"] := 3
</code></pre>
</div>

<p><a name="types-pointer"></a></p>

<h3 id="pointers">Pointers</h3>

<p>Pointers are addresses of dynamically allocated records.
The <code class="highlighter-rouge">NEW</code> keyword allocates a new record of a given type and returns a pointer to it.
Pointers may have the value <code class="highlighter-rouge">NIL</code> that does not point to any object.
To use (dereference) a pointer, it must first be checked for validity (not <code class="highlighter-rouge">NIL</code>) using the <code class="highlighter-rouge">IF VALID</code> construct.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Item IS CLASS
    name: String
    size: Number
END CLASS

VAR item: POINTER TO Item

item := NEW Item
IF VALID item AS p THEN
    p-&gt;name := "Widget"
    p-&gt;size := 5
END IF
</code></pre>
</div>

<p><a name="expressions"></a></p>

<h2 id="expressions">Expressions</h2>

<p>Expressions are combinations of operands and operators.
Operands are values in themselves, which may be expressions surrounded by <code class="highlighter-rouge">( )</code>.
Operators are logical, arithmetic, or string and the valid operators depend on the types of the operands.</p>

<p><a name="expressions-literal"></a></p>

<h3 id="literal-values">Literal Values</h3>

<p>Literal values can be individual lexical elements such as <a href="lexical-identifiers">identifiers</a>, <a href="lexical-numbers">numbers</a>, and <a href="lexical-strings">strings</a>.</p>

<p>Literal arrays are sequences of comma-separated values surrounded by brackets <code class="highlighter-rouge">[ ]</code>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET a: Array&lt;Number&gt; := [1, 2, 3]
</code></pre>
</div>

<p>Literal dictionaries are sequences of comma-separated name/value pairs surrounded by braces <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="p">}</span></code>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET d: Dictionary&lt;Number&gt; := {
    "one": 1,
    "two": 2,
    "three": 3
}
</code></pre>
</div>

<p>For convenience, both literal arrays and dictionaries accept a trailing comma after the final element.</p>

<p><a name="expressions-boolean"></a></p>

<h3 id="boolean-operators">Boolean Operators</h3>

<p>The following operators take two boolean values.</p>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">=</code></td>
      <td>equality</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;&gt;</code></td>
      <td>inequality</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AND</code></td>
      <td>logical conjunction</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">OR</code></td>
      <td>logical disjunction</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-numeric"></a></p>

<h3 id="numeric-operators">Numeric Operators</h3>

<p>The following operators take two number values.</p>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">+</code></td>
      <td>addition</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-</code></td>
      <td>subtraction</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">*</code></td>
      <td>multiplication</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/</code></td>
      <td>division</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">MOD</code></td>
      <td>modulo (remainder)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^</code></td>
      <td>exponentiation</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">=</code></td>
      <td>equality</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;&gt;</code></td>
      <td>inequality</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;</code></td>
      <td>less than</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;</code></td>
      <td>greater than</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;=</code></td>
      <td>less than or equal</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;=</code></td>
      <td>greater than or equal</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-string"></a></p>

<h3 id="string-operators">String Operators</h3>

<p>The following operators take two string values.</p>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">&amp;</code></td>
      <td>concatenation</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">=</code></td>
      <td>equality</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;&gt;</code></td>
      <td>inequality</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;</code></td>
      <td>lexicographical less than</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;</code></td>
      <td>lexicographical greater than</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;=</code></td>
      <td>lexicographical less than or equal</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;=</code></td>
      <td>lexicographical greater than or equal</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-array"></a></p>

<h3 id="array-operators">Array Operators</h3>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">IN</code></td>
      <td>membership test (<em>O(n)</em> complexity)</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-dictionary"></a></p>

<h3 id="dictionary-operators">Dictionary Operators</h3>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">IN</code></td>
      <td>membership test (<em>O(log n)</em> complexity)</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-pointer"></a></p>

<h3 id="pointer-operator">Pointer Operator</h3>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">-&gt;</code></td>
      <td>pointer dereference</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-precedence"></a></p>

<h3 id="operator-precedence">Operator Precedence</h3>

<p>The operator precedence is as follows, highest to lowest:</p>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">(</code> <code class="highlighter-rouge">)</code></td>
      <td>subexpression</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">^</code></td>
      <td>exponentiation</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">*</code> <code class="highlighter-rouge">/</code> <code class="highlighter-rouge">MOD</code></td>
      <td>multiplication, division, modulo</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">+</code> <code class="highlighter-rouge">-</code> <code class="highlighter-rouge">&amp;</code></td>
      <td>addition, subtraction, concatenation</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;</code> <code class="highlighter-rouge">=</code> <code class="highlighter-rouge">&gt;</code></td>
      <td>comparison</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">IN</code></td>
      <td>membership</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">AND</code></td>
      <td>conjunction</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">OR</code></td>
      <td>disjunction</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">IF</code></td>
      <td>conditional</td>
    </tr>
  </tbody>
</table>

<p><a name="expressions-subscript"></a></p>

<h3 id="array-subscripts">Array Subscripts</h3>

<p>Array subscripts are normally integers greater than or equal to zero:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET a: Array&lt;String&gt; := ["foo", "bar", "baz"]
print(a[0])
print(a[2])
</code></pre>
</div>

<p>Two special values may be used, <code class="highlighter-rouge">FIRST</code> and <code class="highlighter-rouge">LAST</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET a: Array&lt;String&gt; := ["foo", "bar", "baz"]
print(a[FIRST])
print(a[LAST])
</code></pre>
</div>

<p><code class="highlighter-rouge">FIRST</code> always means the same as <code class="highlighter-rouge">0</code> and is provided for completeness.
<code class="highlighter-rouge">LAST</code> refers to the index of the last element of the array.</p>

<p>Array slices are also possible using the <code class="highlighter-rouge">TO</code> keyword.
Both indexes are inclusive.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET a: Array&lt;String&gt; := ["foo", "bar", "baz"]
LET b: Array&lt;String&gt; := a[0 TO 1]
LET c: Array&lt;String&gt; := a[LAST-1 TO LAST]
</code></pre>
</div>

<p>In the above example, <code class="highlighter-rouge">b</code> contains <code class="highlighter-rouge">["foo", "bar"]</code> and <code class="highlighter-rouge">c</code> contains <code class="highlighter-rouge">["bar", "baz"]</code>.</p>

<p><a name="expressions-substitution"></a></p>

<h3 id="expression-substitution">Expression Substitution</h3>

<p>Literal strings may contain embedded expressions surrounded by the special escape <code class="highlighter-rouge">\( )</code>.
These expressions are evaluated at run time.
The type of the embedded expression must have a <code class="highlighter-rouge">.toString()</code> method which will be called automatically to convert the result to a string.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>LET a: Array&lt;String&gt; := ["one", "two", "three"]
FOR i := 0 TO 2 DO
    print("i is \(i) and the array element is \(a[i])")
END FOR
</code></pre>
</div>

<p>[TODO: formatting specifiers]</p>

<h2 id="declarations">Declarations</h2>

<h3 id="types-1">Types</h3>

<p>User defined types are introduced with the <code class="highlighter-rouge">RECORD</code> keyword:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR r: RECORD
    size: Number
    colour: String
END RECORD
</code></pre>
</div>

<p>Types may be assigned names using the <code class="highlighter-rouge">TYPE</code> keyword:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Widget IS RECORD
    size: Number
    colour: String
END RECORD

VAR r: Widget
</code></pre>
</div>

<h3 id="constants">Constants</h3>

<p>Constants are defined using the <code class="highlighter-rouge">CONSTANT</code> keyword.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CONSTANT Pi: Number := 3.141592653589793
CONSTANT Sky: String := "blue"
</code></pre>
</div>

<p>The value assigned to a constant must be able to be evaluated at compile time.
This may be an expression:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CONSTANT Pi: Number := 3.141592653589793
CONSTANT Pi2: Number := Pi ^ 2
</code></pre>
</div>

<h3 id="variables">Variables</h3>

<p>Variables are declared using the <code class="highlighter-rouge">VAR</code> keyword:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR count: Number
VAR colour: String
</code></pre>
</div>

<p>Variables declared outside a function are <em>global</em> variables.
Variables declared inside a function are visible only from within that function.</p>

<p>Read-only values (therefore not actually <em>variables</em>) are declared with the <code class="highlighter-rouge">LET</code> keyword:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>IMPORT os

LET path: String := os.getenv("PATH")
</code></pre>
</div>

<p><a name="statements"></a></p>

<h2 id="statements">Statements</h2>

<p><a name="statements-assignment"></a></p>

<h3 id="assignment">Assignment</h3>

<p>Assignment evaluates the expression on the right hand side and assigns it to the storage location identified on the left hand side.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR a: Number

a := 5
</code></pre>
</div>

<p><a name="statements-function-call"></a></p>

<h3 id="function-call">Function Call</h3>

<p>A function call statement is the same as a function call in an expression, except that the function cannot return a value.
See <a href="#functions">Functions</a> for complete information about function calls.</p>

<p><a name="statements-case"></a></p>

<h3 id="case"><code class="highlighter-rouge">CASE</code></h3>

<p>The <code class="highlighter-rouge">CASE</code> statement selects one of a number of alternative code paths based on the value of an expression.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR x: Number := 0

CASE x
    WHEN &lt; 2 DO
        print("less than two")
    WHEN 2 DO
        print("is two")
    WHEN 3 TO 5 DO
        print("three to five")
    WHEN 7, 9 DO
        print("seven or nine")
    WHEN OTHERS DO
        print("is something else")
END CASE
</code></pre>
</div>

<p>The <code class="highlighter-rouge">CASE</code> statement expression may be of type <code class="highlighter-rouge">Number</code>, <code class="highlighter-rouge">String</code>, or an enumeration.
The possible kinds of <code class="highlighter-rouge">WHEN</code> clauses are:</p>

<table>
  <thead>
    <tr>
      <th>Form</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">WHEN &lt;value&gt;</code></td>
      <td>equality match</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WHEN &lt;op&gt; &lt;value&gt;</code></td>
      <td>relational operator comparison (one of <code class="highlighter-rouge">=</code>, <code class="highlighter-rouge">&lt;&gt;</code>, <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">&gt;=</code>)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">WHEN &lt;value&gt; TO &lt;value&gt;</code></td>
      <td>range check (both endpoints inclusive)</td>
    </tr>
  </tbody>
</table>

<p>More than one of the above forms may be included in a <code class="highlighter-rouge">WHEN</code> clause, separated by commas.
The values of <code class="highlighter-rouge">WHEN</code> clauses must not overlap.
The optional <code class="highlighter-rouge">WHEN OTHERS</code> clause is executed when no other <code class="highlighter-rouge">WHEN</code> clauses match.</p>

<p><a name="statements-exit"></a></p>

<h3 id="exit"><code class="highlighter-rouge">EXIT</code></h3>

<p>The <code class="highlighter-rouge">EXIT</code> statement has five different forms:</p>

<table>
  <thead>
    <tr>
      <th>Form</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">EXIT FOR</code></td>
      <td>stop iteration of the nearest enclosing <code class="highlighter-rouge">FOR</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">EXIT FOREACH</code></td>
      <td>stop iteration of the nearest enclosing <code class="highlighter-rouge">FOREACH</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">EXIT FUNCTION</code></td>
      <td>immediately return from a function (only for functions that do not return a value)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">EXIT LOOP</code></td>
      <td>stop iteration of the nearest enclosing <code class="highlighter-rouge">LOOP</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">EXIT REPEAT</code></td>
      <td>stop iteration of the nearest enclosing <code class="highlighter-rouge">REPEAT</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">EXIT WHILE</code></td>
      <td>stop iteration of the nearest enclosing <code class="highlighter-rouge">WHILE</code> loop</td>
    </tr>
  </tbody>
</table>

<p><a name="statements-for"></a></p>

<h3 id="for"><code class="highlighter-rouge">FOR</code></h3>

<p>The <code class="highlighter-rouge">FOR</code> loop iterates a numeric variable over a range of values.
The loop control variable is implicitly a <code class="highlighter-rouge">Number</code> and must not be already declared outside the <code class="highlighter-rouge">FOR</code> statement.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FOR i := 1 TO 10 STEP 2 DO
    print("i is \(i)")
END FOR
</code></pre>
</div>

<p>The above example is equivalent to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR i: Number

i := 1
WHILE i &lt;= 10 DO
    print("i is \(i)")
    i := i + 2
END WHILE
</code></pre>
</div>

<p>The exception is that in the <code class="highlighter-rouge">FOR</code> loop, the value of <code class="highlighter-rouge">i</code> cannot be modified.</p>

<p>The <code class="highlighter-rouge">STEP</code> value is optional and defaults to 1.
It may be any number, including fractional values, except 0.
It must, however, be a compile time constant.</p>

<p><a name="statements-if"></a></p>

<h3 id="if"><code class="highlighter-rouge">IF</code></h3>

<p>The <code class="highlighter-rouge">IF</code> statement tests a condition of type <code class="highlighter-rouge">Boolean</code> and executes one of two alternatives.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR x: Number := 0

IF x &lt; 10 THEN
    print("x is less than 10")
ELSE
    print("not less than 10")
END IF
</code></pre>
</div>

<p>The <code class="highlighter-rouge">ELSE</code> clause is optional.</p>

<p>Additional alternatives may be introduced with the <code class="highlighter-rouge">ELSIF</code> clause:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR x: Number := 0

IF x &lt; 10 THEN
    print("x is less than 10")
ELSIF x &lt; 20 THEN
    print("x is less than 20")
ELSE
    print("not less than 20")
END IF
</code></pre>
</div>

<p>The <code class="highlighter-rouge">IF VALID</code> form is used to test a pointer value to check whether it is <code class="highlighter-rouge">NIL</code>, and capture the pointer value in a new variable for use within the <code class="highlighter-rouge">IF VALID</code> block.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>TYPE Record IS CLASS
    name: String
END CLASS

VAR p: POINTER TO Record := NIL

IF VALID p AS q THEN
    print(q-&gt;name)
END IF
</code></pre>
</div>

<p><a name="statements-let"></a></p>

<h3 id="let"><code class="highlighter-rouge">LET</code></h3>

<p>The <code class="highlighter-rouge">LET</code> statement introduces a new read-only variable and assigns a value (which can be an arbitrary expression, evaluated at run time).</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCTION five(): Number
    RETURN 5
END FUNCTION

LET ten: Number := 2 * five()
</code></pre>
</div>

<p><a name="statements-loop"></a></p>

<h3 id="loop"><code class="highlighter-rouge">LOOP</code></h3>

<p>The <code class="highlighter-rouge">LOOP</code> statement begins a loop with no specific exit condition.
There is normally an <code class="highlighter-rouge">EXIT LOOP</code> statement within the loop for a termination condition.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR i: Number := 0

LOOP
    INC i
    IF i &gt;= 10 THEN
        EXIT LOOP
    END IF
    print("i is \(i)")
END LOOP
</code></pre>
</div>

<p><a name="statements-next"></a></p>

<h3 id="next"><code class="highlighter-rouge">NEXT</code></h3>

<p>The <code class="highlighter-rouge">NEXT</code> statement has four different forms:</p>

<table>
  <thead>
    <tr>
      <th>Form</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">NEXT FOR</code></td>
      <td>next iteration of the nearest enclosing <code class="highlighter-rouge">FOR</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">NEXT FOREACH</code></td>
      <td>next iteration of the nearest enclosing <code class="highlighter-rouge">FOREACH</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">NEXT LOOP</code></td>
      <td>next iteration of the nearest enclosing <code class="highlighter-rouge">LOOP</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">NEXT REPEAT</code></td>
      <td>next iteration of the nearest enclosing <code class="highlighter-rouge">REPEAT</code> loop</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">NEXT WHILE</code></td>
      <td>next iteration of the nearest enclosing <code class="highlighter-rouge">WHILE</code> loop</td>
    </tr>
  </tbody>
</table>

<p>When using <code class="highlighter-rouge">NEXT FOR</code>, the loop control variable is incremented (or decremented, according to the <code class="highlighter-rouge">STEP</code> value) before continuing to the next iteration.</p>

<p>When using <code class="highlighter-rouge">NEXT REPEAT</code> or <code class="highlighter-rouge">NEXT WHILE</code>, the loop condition is tested before continuing to the next iteration.</p>

<p><a name="statements-raise"></a></p>

<h3 id="raise"><code class="highlighter-rouge">RAISE</code></h3>

<p>The <code class="highlighter-rouge">RAISE</code> statement raises an exception.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>EXCEPTION InvalidWidgetSizeException

VAR size: Number := 3
IF size &gt; 4 THEN
    RAISE InvalidWidgetSizeException(info WITH size.toString())
END IF
</code></pre>
</div>

<p>The executor searches for an exception handler that can handle the given expression type, and execution resumes with the exception handler.
If no exception handler is found, the program terminates with a message and stack trace.</p>

<p><a name="statements-repeat"></a></p>

<h3 id="repeat"><code class="highlighter-rouge">REPEAT</code></h3>

<p>The <code class="highlighter-rouge">REPEAT</code> statement begins a loop with a bottom-tested condition.
Execution always proceeds into the loop body at least once.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR x: Number := 0

REPEAT
    print("x is \(x)")
    INC x
UNTIL x = 10
</code></pre>
</div>

<p>The above loop will print the whole numbers 0 through 9.</p>

<p><a name="statements-return"></a></p>

<h3 id="return"><code class="highlighter-rouge">RETURN</code></h3>

<p>The <code class="highlighter-rouge">RETURN</code> statement returns a value from a function.
The type of the expression in the <code class="highlighter-rouge">RETURN</code> statement must match the return type declared in the function header (which means that it is only valid to use <code class="highlighter-rouge">RETURN</code> for a function that actually returns a value).</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCTION square(x: Number): Number
    RETURN x ^ 2
END FUNCTION
</code></pre>
</div>

<p><a name="statements-try"></a></p>

<h3 id="try"><code class="highlighter-rouge">TRY</code></h3>

<p>The <code class="highlighter-rouge">TRY</code> statement introduces a block that handles exceptions.
After entering a <code class="highlighter-rouge">TRY</code> block, any exception that happens within the block is checked against the <code class="highlighter-rouge">TRAP</code> clauses.
If an exception matching a clause is raised, the corresponding exception handler starts running.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>EXCEPTION InvalidWidgetSizeException

VAR size: Number := 5
TRY
    IF size &gt; 4 THEN
        RAISE InvalidWidgetSizeException(info WITH size.toString())
    END IF
TRAP InvalidWidgetSizeException AS x DO
    print("Invalid size \(x.info)")
END TRY
</code></pre>
</div>

<p><a name="statements-while"></a></p>

<h3 id="while"><code class="highlighter-rouge">WHILE</code></h3>

<p>The <code class="highlighter-rouge">WHILE</code> statement begins a loop with a top-tested condition.
The condition is tested before every loop iteration, including the first one.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VAR x: Number := 0

WHILE x &lt; 10 DO
    print("x is \(x)")
    INC x
END WHILE
</code></pre>
</div>

<p>The above loop will print the whole numbers 0 through 9.</p>

<p><a name="functions"></a></p>

<h2 id="functions">Functions</h2>

<p>Functions are declared using the <code class="highlighter-rouge">FUNCTION</code> keyword:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCTION square(x: Number): Number
    RETURN x ^ 2
END FUNCTION
</code></pre>
</div>

<p>The return type of a function (appearing after the <code class="highlighter-rouge">)</code>) is optional.
The <code class="highlighter-rouge">RETURN</code> statement is not permitted inside a function that does not return a value (use <code class="highlighter-rouge">EXIT FUNCTION</code> instead).</p>

<p><a name="functions-parameter-mode"></a></p>

<h3 id="parameter-modes">Parameter Modes</h3>

<p>Function parameters may be declared with a parameter mode:</p>

<ul>
  <li><code class="highlighter-rouge">IN</code> - The function parameter is passed from the caller into the function, and may not be modified within the function.</li>
  <li><code class="highlighter-rouge">INOUT</code> - A reference to the function argument is passed to the function, and the parameter may be modified within the function.</li>
  <li><code class="highlighter-rouge">OUT</code> - No value is passed into the function, but any value assigned within the function is passed back to the caller.</li>
</ul>

<p>The default parameter mode is <code class="highlighter-rouge">IN</code>.
For <code class="highlighter-rouge">INOUT</code> and <code class="highlighter-rouge">OUT</code> parameters, the caller must supply an actual variable rather than the result of an expression.</p>

<p>When calling a function with a parameter that has <code class="highlighter-rouge">INOUT</code> or <code class="highlighter-rouge">OUT</code> modes, the parameter mode must also be declared in the call.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCTION double(INOUT x: Number)
    x := x * 2
END FUNCTION

VAR a: Number := 5
double(INOUT a)
</code></pre>
</div>

<p><a name="functions-default"></a></p>

<h3 id="default-parameter-value">Default Parameter Value</h3>

<p>Function parameters may be declared with a default value.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCTION add(INOUT x: Number, delta: Number DEFAULT 1)
    x := x + delta
END FUNCTION

VAR value: Number := 5
add(INOUT value)
add(INOUT value, 2)
</code></pre>
</div>

<p>When a parameter is not specified and it has a default value, the function call is executed as if the parameter were present and had the given value.
Default parameter values only apply to <code class="highlighter-rouge">IN</code> mode parameters.</p>

<p><a name="functions-named"></a></p>

<h3 id="named-parameters">Named Parameters</h3>

<p>When calling a function, function parameters may be named using the <code class="highlighter-rouge">WITH</code> keyword.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>FUNCTION birthdayParty(name: String, balloons: Number, cake: String, clown: Boolean)
    % ...
END FUNCTION

birthdayParty(name WITH "Helen", balloons WITH 10, cake WITH "Chocolate", clown WITH TRUE)
</code></pre>
</div>

<p>Parameters may be passed in order without using <code class="highlighter-rouge">WITH</code>, and then switch to using <code class="highlighter-rouge">WITH</code> for the remainder of the function call.
Each non-default parameter must be specified exactly once in the function call.</p>

<p><a name="modules"></a></p>

<h2 id="modules">Modules</h2>

<p>Neon code can be divided into modules, which are separate source files.
A module named <code class="highlighter-rouge">example</code> would be found in a file called <code class="highlighter-rouge">example.neon</code>.</p>

<p><a name="modules-export"></a></p>

<p>Module source code must <em>export</em> identifiers before they can be used outside the module file.
This is done with the <code class="highlighter-rouge">EXPORT</code> declaration:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>EXPORT hello

FUNCTION hello()
    print("Hello world")
END FUNCTION
</code></pre>
</div>

<p><a name="modules-import"></a></p>

<p>In order to use an identifier exported by another module, the <code class="highlighter-rouge">IMPORT</code> declaration must be used.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>IMPORT os

print(os.getenv("PATH"))
</code></pre>
</div>

<p>Individual identifiers may also be imported:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>IMPORT os.getenv

print(getenv("PATH"))
</code></pre>
</div>

<p><a name="modules-neonpath"></a></p>

<h3 id="module-path">Module Path</h3>

<p>When a module is imported, the compiler must be able to locate the code for the imported module.
The followed directories are searched in order:</p>

<ol>
  <li>Same directory as the importing source file</li>
  <li>The current directory</li>
  <li>The directories in the environment variable <tt>NEONPATH</tt></li>
  <li>The directories listed in the <tt>.neonpath</tt> file in the current directory</li>
</ol>

<p><a name="library"></a></p>

<h2 id="standard-library">Standard Library</h2>

<p><a name="library-bigint"></a></p>

<h3 id="bigint">bigint</h3>

<p>The <code class="highlighter-rouge">bigint</code> library provides functions for performing arithmetic with aribitrary precision integers.</p>

<p><a name="library-binary"></a></p>

<h3 id="binary">binary</h3>

<p>The <code class="highlighter-rouge">binary</code> library provides functions for working with <code class="highlighter-rouge">Number</code> values treated as 32-bit binary integers.</p>

<p><a name="library-cformat"></a></p>

<h3 id="cformat">cformat</h3>

<p>The <code class="highlighter-rouge">cformat</code> library provides formatting functions similar to the C <code class="highlighter-rouge">printf</code> family of functions.</p>

<p><a name="library-complex"></a></p>

<h3 id="complex">complex</h3>

<p>The <code class="highlighter-rouge">complex</code> library provides functions for performing arithmetic on complex numbers (with a real and imaginary part).</p>

<p><a name="library-compress"></a></p>

<h3 id="compress">compress</h3>

<p>The <code class="highlighter-rouge">compress</code> library provides functions for performing data compression using a variety of common algorithms (gzip, bzip2, lzma).</p>

<p><a name="library-curses"></a></p>

<h3 id="curses">curses</h3>

<p>The <code class="highlighter-rouge">curses</code> library provides access to the “curses” terminal library for building textual user interfaces.</p>

<p><a name="library-datetime"></a></p>

<h3 id="datetime">datetime</h3>

<p>The <code class="highlighter-rouge">datetime</code> library provides functions work working with calendar dates and times.</p>

<p><a name="library-file"></a></p>

<h3 id="file">file</h3>

<p>The <code class="highlighter-rouge">file</code> library provides high level functions for filesystem access.</p>

<p><a name="library-hash"></a></p>

<h3 id="hash">hash</h3>

<p>The <code class="highlighter-rouge">hash</code> library provides functions for calculating hashes using a number of different algorithms (CRC32, MD5, SHA1, SHA256, SHA3).</p>

<p><a name="library-http"></a></p>

<h3 id="http">http</h3>

<p>The <code class="highlighter-rouge">http</code> library provides functions for interacting with remote servers using HTTP.</p>

<p><a name="library-io"></a></p>

<h3 id="io">io</h3>

<p>The <code class="highlighter-rouge">io</code> library provides low-level functions for accessing files as streams of bytes.</p>

<p><a name="library-json"></a></p>

<h3 id="json">json</h3>

<p>The <code class="highlighter-rouge">json</code> library provides functions for encoding and decoding data in JSON format.</p>

<p><a name="library-math"></a></p>

<h3 id="math">math</h3>

<p>The <code class="highlighter-rouge">math</code> library provides trigonometric, trancendental, and other functions for real numbers.</p>

<p><a name="library-net"></a></p>

<h3 id="net">net</h3>

<p>The <code class="highlighter-rouge">net</code> library provides functions for low-level socket communications.</p>

<p><a name="library-os"></a></p>

<h3 id="os">os</h3>

<p>The <code class="highlighter-rouge">os</code> library provides low-level functions for working with the opering system environment.</p>

<p><a name="library-random"></a></p>

<h3 id="random">random</h3>

<p>The <code class="highlighter-rouge">random</code> library provides functions for generating random numbers.</p>

<p><a name="library-regex"></a></p>

<h3 id="regex">regex</h3>

<p>The <code class="highlighter-rouge">regex</code> library provides functions for performing text searches using regular expressions.</p>

<p><a name="library-sqlite"></a></p>

<h3 id="sqlite">sqlite</h3>

<p>The <code class="highlighter-rouge">sqlite</code> library provides access to the SQLite database library.</p>

<p><a name="library-string"></a></p>

<h3 id="string-1">string</h3>

<p>The <code class="highlighter-rouge">string</code> library provides functions for working with textual data in strings.</p>

<p><a name="library-struct"></a></p>

<h3 id="struct">struct</h3>

<p>The <code class="highlighter-rouge">struct</code> library provides functions for packing and unpacking data into C-like structures.</p>

<p><a name="library-sys"></a></p>

<h3 id="sys">sys</h3>

<p>The <code class="highlighter-rouge">sys</code> library provides low level functions for interacting with the Neon runtime environment.</p>

<p><a name="library-time"></a></p>

<h3 id="time">time</h3>

<p>The <code class="highlighter-rouge">time</code> library provides functions for working with real (wall clock) time.</p>

<p><a name="library-variant"></a></p>

<h3 id="variant">variant</h3>

<p>The <code class="highlighter-rouge">variant</code> library provides functions for working with data encapsulated in a generic <code class="highlighter-rouge">Variant</code> type.</p>

<p><a name="library-xml"></a></p>

<h3 id="xml">xml</h3>

<p>The <code class="highlighter-rouge">xml</code> data provides functions for working with data in XML format.</p>

<p><a name="grammar"></a></p>

<h2 id="grammar">Grammar</h2>

<p><a href="grammar.xhtml">Neon grammar in “railroad diagrams”</a>.</p>

    </div>
  </body>
</html>
